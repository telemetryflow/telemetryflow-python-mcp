# TelemetryFlow Python MCP Server Configuration
# Python Implementation v1.1.2

# =============================================================================
# Server Configuration
# =============================================================================
server:
  name: "TelemetryFlow-MCP"
  version: "1.1.2"
  host: "localhost"
  port: 8080
  transport: "stdio"  # stdio, sse, websocket (future)
  debug: false
  read_timeout: 300.0
  write_timeout: 60.0

# =============================================================================
# Claude API Configuration
# =============================================================================
claude:
  # API key - can also be set via ANTHROPIC_API_KEY environment variable
  api_key: ""
  default_model: "claude-sonnet-4-20250514"
  max_tokens: 4096
  temperature: 1.0
  timeout: 120.0
  max_retries: 3
  # base_url: ""  # Optional custom base URL

# =============================================================================
# MCP Protocol Configuration
# =============================================================================
mcp:
  protocol_version: "2024-11-05"
  enable_tools: true
  enable_resources: true
  enable_prompts: true
  enable_logging: true
  enable_sampling: false
  tool_timeout: 30.0
  max_message_size: 10485760  # 10MB

# =============================================================================
# Logging Configuration
# =============================================================================
logging:
  level: "info"  # debug, info, warning, error
  format: "json"  # json, text
  output: "stderr"  # stderr, stdout, or file path

# =============================================================================
# Cache Configuration (Redis)
# =============================================================================
cache:
  redis_url: "redis://localhost:6379"
  cache_enabled: true
  cache_ttl: 300  # seconds

# =============================================================================
# Queue Configuration (NATS)
# =============================================================================
queue:
  queue_enabled: true
  queue_concurrency: 5
  nats_url: "nats://localhost:4222"

# =============================================================================
# Database Configuration (PostgreSQL)
# =============================================================================
database:
  postgres_url: "postgres://telemetryflow:telemetryflow@localhost:5432/tfo_mcp?sslmode=disable"
  postgres_max_conns: 25
  postgres_min_conns: 5

# =============================================================================
# Analytics Configuration (ClickHouse)
# =============================================================================
analytics:
  clickhouse_url: "clickhouse://localhost:9000/tfo_mcp_analytics"

# =============================================================================
# MCP Telemetry Configuration
# =============================================================================
telemetry_mcp:
  enabled: true
  backend: "telemetryflow"  # telemetryflow, otel
  otlp_endpoint: "localhost:4317"
  service_name: "telemetryflow-mcp"

# =============================================================================
# TelemetryFlow SDK Configuration
# =============================================================================
telemetry:
  enabled: false
  service_name: "telemetryflow-mcp"
  service_version: "1.1.2"
  service_namespace: "telemetryflow"
  environment: "development"

  # API credentials - supports both single key (Go SDK) and split keys (Python SDK)
  api_key: ""  # Single API key (Go SDK compatibility)
  api_key_id: ""  # TelemetryFlow API key ID (tfk_*)
  api_key_secret: ""  # TelemetryFlow API key secret (tfs_*)

  # Connection settings
  endpoint: "api.telemetryflow.id:4317"
  protocol: "grpc"  # grpc, http
  insecure: false
  timeout: 30.0
  compression: true

  # Signal configuration
  enable_traces: true
  enable_metrics: true
  enable_logs: true
  enable_exemplars: true

  # Batch settings
  batch_timeout_ms: 5000
  batch_max_size: 512

  # Retry settings
  retry_enabled: true
  max_retries: 3
  retry_backoff_ms: 500

  # Rate limiting
  rate_limit: 1000
